<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ItShop</title>
    <link rel="stylesheet" href="style.css">
    <script src="../Lay_Fashion/icon/fontawesome-free-6.3.0-web/js/all.min.js"></script>
    <link rel="stylesheet" href="../Lay_Fashion/icon/fontawesome-free-6.3.0-web/css/all.min.css">
</head>
<body>
    <nav class="nav_bar">
        <div class="nav_p">
            <p>IT Shop</p>
        </div>
        <ul>
            <li><a href="">Home</a></li>
            <li>
                <div id="icon">
                    <a href="checkout.html"><i class="fa-solid fa-cart-shopping"></i></a>
                   
                </div>
                <span id="count_number"></span>
            </li>
        </ul>
    </nav>

    <div class="main_div">
        <div class="image_div">
            <img src="../CSS/images/laptop.jpg" alt="">
            <b>Laptop1</b>
            <p>Price - 890000</p>
            <div id="btn">
                <button class="addToCart" data-id="1" data-name="Laptop1" data-price="890000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/laptop.jpg" alt="">
            <b>Laptop2</b>
            <p>Price - 890000</p>
            <div id="btn">
                <button class="addToCart" data-id="2" data-name="Laptop2" data-price="890000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/laptop.jpg" alt="">
            <b>Laptop3</b>
            <p>Price - 890000</p>
            <div id="btn">
                <button class="addToCart" data-id="3" data-name="Laptop3" data-price="890000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/laptop.jpg" alt="">
            <b>Laptop4</b>
            <p>Price - 890000</p>
            <div id="btn">
                <button class="addToCart" data-id="4" data-name="Laptop4" data-price="890000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/phone7.jpg" alt="">
            <b>Phone1</b>
            <p>Price - 3400000</p>
            <div id="btn">
                <button class="addToCart" data-id="phone1" data-name="Phone1" data-price="3400000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/iphone13.jpg" alt="">
            <b>Phone2</b>
            <p>Price - 3400000</p>
            <div id="btn">
                <button class="addToCart" data-id="phone2" data-name="Phone2" data-price="3400000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/phone9.jpg" alt="">
            <b>Phone3</b>
            <p>Price - 3400000</p>
            <div id="btn">
                <button class="addToCart" data-id="phone3" data-name="Phone3" data-price="3400000">Add to Cart</button>
            </div>
        </div>
        <div class="image_div">
            <img src="../CSS/images/phone1.jpg" alt="">
            <b>Phone4</b>
            <p>Price - 3400000</p>
            <div id="btn">
                <button class="addToCart" data-id="phone4" data-name="Phone4" data-price="3400000">Add to Cart</button>
            </div>
        </div>
    </div>

    <script src="jquery.min.js"></script>
    <script>
        $(document).ready(function(){

            count();

            function count(){
                    let shopString = localStorage.getItem('shops');
                    if(shopString){
                        let shopArray = JSON.parse(shopString);
                        if(shopArray != null){
                            $('#count_number').text(shopArray.length);
                        }
                      
                    }else{
                        $('#count_number').text('0');
                    }
            }


            $('.addToCart').click(function(){
                let item_id = $(this).data('id');
                let item_name = $(this).data('name');
                let item_price = $(this).data('price');

                console.log(item_id,item_name,item_price);

                let shop_items = {
                    id : item_id,
                    name : item_name,
                    price : item_price,
                    qty : 1
                }
                console.log(shop_items);

                let shopString = localStorage.getItem('shops');
                let shopArray ;
                if (shopString == null){
                    shopArray = [];
                }else{
                    shopArray = JSON.parse(shopString);
                }

                let status = false;
                $.each(shopArray,function(i,v){
                    if(item_id == v.id){
                        status = true;
                        v.qty++;
                    }
                })

                if(status == false){
                    shopArray.push(shop_items);
                }

                // shopArray.push(shop_items);

                let shopData = JSON.stringify(shopArray);
                localStorage.setItem('shops',shopData);

                count();
            })
        })
    </script>
</body>
</html>